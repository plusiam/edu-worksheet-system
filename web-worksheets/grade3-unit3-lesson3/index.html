<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3í•™ë…„ 3ë‹¨ì› 3ì°¨ì‹œ - ì•½ì†ì„ ì§€í‚¤ë©° ì‚´ì•„ìš”</title>
    <link rel="stylesheet" href="../common/styles.css">
    <style>
        .lesson-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .lesson-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
            font-size: 0.9em;
        }
        
        .situation-card {
            background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
            border: 2px solid #ffb74d;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .character-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }
        
        .situation-text {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 20px;
            color: #2d3748;
        }
        
        .choice-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 25px;
        }
        
        .choice-btn {
            padding: 15px 20px;
            border: 3px solid #e2e8f0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .choice-btn:hover {
            border-color: #667eea;
            background: #f0f4f8;
            transform: translateY(-2px);
        }
        
        .choice-btn.correct {
            background: #c6f6d5;
            border-color: #48bb78;
            color: #2f855a;
        }
        
        .choice-btn.wrong {
            background: #fed7d7;
            border-color: #f56565;
            color: #c53030;
        }
        
        .reflection-section {
            background: #f0fff4;
            border-left: 5px solid #48bb78;
            padding: 20px;
            margin: 30px 0;
            border-radius: 0 10px 10px 0;
        }
        
        .progress-section {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .next-btn {
            margin-top: 20px;
            display: none;
        }
        
        .lesson-objectives {
            background: #e6fffa;
            border: 2px solid #4fd1c7;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            padding: 0 20px;
        }
        
        .step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #718096;
        }
        
        .step.active {
            background: #667eea;
            color: white;
        }
        
        .step.completed {
            background: #48bb78;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="lesson-header">
            <h1>ğŸ¤ 3í•™ë…„ 3ë‹¨ì› 3ì°¨ì‹œ</h1>
            <h2>ì•½ì†ì„ ì§€í‚¤ë©° ì‚´ì•„ìš”</h2>
            <div class="lesson-info">
                <div>ğŸ“š êµê³¼: ë„ë•</div>
                <div>ğŸ‘¥ ëŒ€ìƒ: ì´ˆë“±í•™êµ 3í•™ë…„</div>
                <div>â° ì°¨ì‹œ: 3ë‹¨ì› 3ì°¨ì‹œ</div>
                <div>ğŸ¯ ì£¼ì œ: ì•½ì†ì˜ ì†Œì¤‘í•¨</div>
            </div>
        </div>
        
        <div class="lesson-objectives">
            <h3>ğŸ¯ í•™ìŠµëª©í‘œ</h3>
            <ul>
                <li>ì•½ì†ì„ ì§€í‚¤ëŠ” ê²ƒì´ ì™œ ì¤‘ìš”í•œì§€ ì•Œ ìˆ˜ ìˆë‹¤.</li>
                <li>ì•½ì†ì„ ì§€í‚¤ì§€ ì•Šì•˜ì„ ë•Œì˜ ë¬¸ì œì ì„ ì´í•´í•  ìˆ˜ ìˆë‹¤.</li>
                <li>ì¼ìƒìƒí™œì—ì„œ ì•½ì†ì„ ì§€í‚¤ë ¤ëŠ” ë§ˆìŒì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.</li>
            </ul>
        </div>
        
        <div class="step-indicator">
            <div class="step active" id="step1">1</div>
            <div class="step" id="step2">2</div>
            <div class="step" id="step3">3</div>
            <div class="step" id="step4">4</div>
            <div class="step" id="step5">5</div>
        </div>
        
        <div class="progress-section">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="font-weight: bold;">í•™ìŠµ ì§„í–‰ë„</span>
                <span class="progress-text"><span id="currentStep">1</span> / 5 ë‹¨ê³„</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 20%;"></div>
            </div>
        </div>
        
        <div id="activityContainer">
            <!-- í™œë™ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>
        
        <div class="text-center">
            <button class="btn btn-primary next-btn" id="nextBtn" onclick="nextActivity()">
                ë‹¤ìŒ í™œë™
            </button>
            <button class="btn btn-success next-btn" id="finishBtn" onclick="finishLesson()" style="display: none;">
                í•™ìŠµ ì™„ë£Œ
            </button>
        </div>
    </div>

    <!-- ì™„ë£Œ ëª¨ë‹¬ -->
    <div class="modal" id="resultModal">
        <div class="modal-content">
            <h2>ğŸ‰ í•™ìŠµ ì™„ë£Œ!</h2>
            <div id="resultContent"></div>
            <button class="btn btn-primary" onclick="location.href='../index.html'">
                ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            </button>
        </div>
    </div>

    <script src="../common/scripts.js"></script>
    <script>
        // í•™ìŠµ í™œë™ ë°ì´í„°
        const activities = [
            {
                id: 'activity1',
                type: 'situation',
                title: 'ìƒí™© 1: ì¹œêµ¬ì™€ì˜ ë†€ì´ ì•½ì†',
                character: 'ğŸ‘¦',
                situation: 'ë¯¼ìˆ˜ëŠ” ì¹œêµ¬ ì§€í˜¸ì™€ í† ìš”ì¼ ì˜¤í›„ 2ì‹œì— ê³µì›ì—ì„œ ë§Œë‚˜ê¸°ë¡œ ì•½ì†í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° í† ìš”ì¼ ì•„ì¹¨ì— í• ë¨¸ë‹ˆê°€ ê°‘ìê¸° ë†€ëŸ¬ ì˜¤ì…¨ì–´ìš”.',
                question: 'ë¯¼ìˆ˜ëŠ” ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”?',
                choices: [
                    { text: 'ì§€í˜¸ì—ê²Œ ë¯¸ë¦¬ ì—°ë½í•´ì„œ ì•½ì† ì‹œê°„ì„ ë°”ê¿”ë‹¬ë¼ê³  ë¶€íƒí•œë‹¤', correct: true },
                    { text: 'ê·¸ëƒ¥ ê°€ì§€ ì•Šê³  ì—°ë½ë„ í•˜ì§€ ì•ŠëŠ”ë‹¤', correct: false },
                    { text: 'í• ë¨¸ë‹ˆë³´ë‹¤ ì¹œêµ¬ê°€ ë” ì¤‘ìš”í•˜ë‹ˆ ì•½ì†ëŒ€ë¡œ ë‚˜ê°„ë‹¤', correct: false },
                    { text: 'ëŠ¦ì–´ë„ ìƒê´€ì—†ìœ¼ë‹ˆ ì‹œê°„ ë§ì¶° ë‚˜ê°„ë‹¤', correct: false }
                ],
                explanation: 'ì•½ì†ì€ ì„œë¡œë¥¼ ë°°ë ¤í•˜ëŠ” ë§ˆìŒì—ì„œ ì‹œì‘ë©ë‹ˆë‹¤. ìƒí™©ì´ ìƒê²¼ì„ ë•ŒëŠ” ë¯¸ë¦¬ ì—°ë½í•´ì„œ ìƒëŒ€ë°©ì´ ê¸°ë‹¤ë¦¬ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.'
            },
            {
                id: 'activity2',
                type: 'situation',
                title: 'ìƒí™© 2: ìˆ™ì œ ê²€ì‚¬ ì•½ì†',
                character: 'ğŸ‘§',
                situation: 'ì„ ìƒë‹˜ê»˜ì„œ "ë‚´ì¼ê¹Œì§€ ê³¼í•™ ê´€ì°°ì¼ê¸°ë¥¼ ê¼­ ì¨ì™€ì•¼ í•œë‹¤"ê³  í•˜ì…¨ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ìˆ˜ì§„ì´ëŠ” ì¢‹ì•„í•˜ëŠ” TV í”„ë¡œê·¸ë¨ì„ ë³´ëŠë¼ ê¹œë¹¡í–ˆì–´ìš”.',
                question: 'ìˆ˜ì§„ì´ëŠ” ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”?',
                choices: [
                    { text: 'ì¹œêµ¬ ê²ƒì„ ë² ê»´ì„œ ë¹¨ë¦¬ ì¨ê°„ë‹¤', correct: false },
                    { text: 'ì„ ìƒë‹˜ê»˜ ì†”ì§í•˜ê²Œ ë§ì”€ë“œë¦¬ê³  ë‹¤ìŒì—ëŠ” ê¼­ í•˜ê² ë‹¤ê³  ì•½ì†í•œë‹¤', correct: true },
                    { text: 'ì•„í”ˆ ì²™í•´ì„œ í•™êµì— ê°€ì§€ ì•ŠëŠ”ë‹¤', correct: false },
                    { text: 'ìˆ™ì œë¥¼ ì•ˆ í•´ì˜¨ ì¹œêµ¬ë“¤ì„ ì°¾ì•„ì„œ ê°™ì´ ë³€ëª…í•œë‹¤', correct: false }
                ],
                explanation: 'ì‹¤ìˆ˜í–ˆì„ ë•ŒëŠ” ì†”ì§í•˜ê²Œ ì¸ì •í•˜ê³  ë‹¤ìŒì—ëŠ” ë” ì˜í•˜ê² ë‹¤ëŠ” ë§ˆìŒê°€ì§ì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ê±°ì§“ë§ì´ë‚˜ ë¶€ì •í•œ ë°©ë²•ì€ ë” í° ë¬¸ì œë¥¼ ë§Œë“¤ì–´ìš”.'
            },
            {
                id: 'activity3',
                type: 'situation',
                title: 'ìƒí™© 3: ë¬¼ê±´ ë¹Œë ¤ì£¼ê¸° ì•½ì†',
                character: 'ğŸ§’',
                situation: 'íƒœìš°ëŠ” ì¹œêµ¬ í˜„ìš°ì—ê²Œ ì†Œì¤‘í•œ ë§Œí™”ì±…ì„ ë¹Œë ¤ì¤¬ìŠµë‹ˆë‹¤. í˜„ìš°ëŠ” "ì¼ì£¼ì¼ í›„ì— ê¼­ ëŒë ¤ì£¼ê² ë‹¤"ê³  ì•½ì†í–ˆëŠ”ë°, ë²Œì¨ 2ì£¼ì¼ì´ ì§€ë‚¬ì–´ìš”.',
                question: 'ì´ëŸ° ìƒí™©ì—ì„œ íƒœìš°ëŠ” ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”?',
                choices: [
                    { text: 'í™”ë¥¼ ë‚´ë©° ë‹¹ì¥ ëŒë ¤ë‹¬ë¼ê³  ì†Œë¦¬ì¹œë‹¤', correct: false },
                    { text: 'í˜„ìš°ì—ê²Œ ì¹œì ˆí•˜ê²Œ ë§Œí™”ì±…ì„ ì–¸ì œ ëŒë ¤ì¤„ ìˆ˜ ìˆëŠ”ì§€ ë¬¼ì–´ë³¸ë‹¤', correct: true },
                    { text: 'ê·¸ëƒ¥ í¬ê¸°í•˜ê³  ì•„ë¬´ ë§ë„ í•˜ì§€ ì•ŠëŠ”ë‹¤', correct: false },
                    { text: 'ë‹¤ë¥¸ ì¹œêµ¬ë“¤ì—ê²Œ í˜„ìš° ìš•ì„ í•œë‹¤', correct: false }
                ],
                explanation: 'ì•½ì†ì„ ì§€í‚¤ì§€ ì•ŠëŠ” ì¹œêµ¬ì—ê²Œë„ ì¹œì ˆí•˜ê³  ì´í•´í•˜ëŠ” ë§ˆìŒìœ¼ë¡œ ëŒ€í™”í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. í™”ë¥¼ ë‚´ê±°ë‚˜ í¬ê¸°í•˜ì§€ ë§ê³  ì„œë¡œ ì´ì•¼ê¸°í•´ë³´ì„¸ìš”.'
            },
            {
                id: 'activity4',
                type: 'situation',
                title: 'ìƒí™© 4: ê°€ì¡±ê³¼ì˜ ì•½ì†',
                character: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',
                situation: 'ì§€ë¯¼ì´ëŠ” ì—„ë§ˆì™€ "ë°©ì„ ê¹¨ë—ì´ ì •ë¦¬í•˜ë©´ ì£¼ë§ì— ë†€ì´ê³µì›ì— ê°€ì"ê³  ì•½ì†í–ˆìŠµë‹ˆë‹¤. ì§€ë¯¼ì´ê°€ ì—´ì‹¬íˆ ë°©ì„ ì •ë¦¬í–ˆëŠ”ë°, ì—„ë§ˆê°€ ê°‘ìê¸° ì¼ì´ ìƒê²¨ì„œ ëª» ê°„ë‹¤ê³  í•˜ì„¸ìš”.',
                question: 'ì´ë•Œ ì§€ë¯¼ì´ëŠ” ì–´ë–¤ ë§ˆìŒê°€ì§ì„ ê°€ì ¸ì•¼ í• ê¹Œìš”?',
                choices: [
                    { text: 'ì—„ë§ˆê°€ ì•½ì†ì„ ì–´ê²¼ìœ¼ë‹ˆ í™”ë¥¼ ë‚´ê³  ì‚ì§„ë‹¤', correct: false },
                    { text: 'ì—„ë§ˆì˜ ìƒí™©ì„ ì´í•´í•˜ê³  ë‹¤ë¥¸ ë‚ ì„ ê¸°ë‹¤ë¦°ë‹¤', correct: true },
                    { text: 'ë°© ì •ë¦¬ë¥¼ ë‹¤ì‹œ ì–´ì§€ëŸ½íŒë‹¤', correct: false },
                    { text: 'ì•ìœ¼ë¡œëŠ” ì—„ë§ˆ ë§ì„ ë“£ì§€ ì•Šê² ë‹¤ê³  í•œë‹¤', correct: false }
                ],
                explanation: 'ê°€ì¡±ë„ ë•Œë¡œëŠ” ì–´ì©” ìˆ˜ ì—†ëŠ” ìƒí™©ì´ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”. ì„œë¡œ ì´í•´í•˜ê³  ë°°ë ¤í•˜ëŠ” ë§ˆìŒì´ ê°€ì¡± ê°„ì˜ ì•½ì†ì„ ë”ìš± ì†Œì¤‘í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.'
            },
            {
                id: 'activity5',
                type: 'reflection',
                title: 'ìƒê° ì •ë¦¬í•˜ê¸°',
                character: 'ğŸ’­',
                question: 'ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì—¬ëŸ¬ë¶„ë§Œì˜ ì•½ì† ì§€í‚¤ê¸° ë‹¤ì§ì„ ì¨ë³´ì„¸ìš”.',
                prompt: 'ë‚˜ëŠ” ì•ìœ¼ë¡œ ì•½ì†ì„ ì§€í‚¤ê¸° ìœ„í•´...',
                examples: [
                    'ì•½ì†í•œ ë‚´ìš©ì„ ìŠì§€ ì•Šë„ë¡ ë©”ëª¨í•˜ê² ìŠµë‹ˆë‹¤.',
                    'ìƒí™©ì´ ìƒê¸°ë©´ ë¯¸ë¦¬ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.',
                    'ë‹¤ë¥¸ ì‚¬ëŒì˜ ì…ì¥ë„ ìƒê°í•´ë³´ê² ìŠµë‹ˆë‹¤.',
                    'ì‘ì€ ì•½ì†ë¶€í„° ì°¨ê·¼ì°¨ê·¼ ì§€ì¼œë‚˜ê°€ê² ìŠµë‹ˆë‹¤.'
                ]
            }
        ];

        let currentActivityIndex = 0;
        let session = null;
        let userPromises = [];

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            session = new LearningSession('grade3-unit3-lesson3-promise');
            showActivity(currentActivityIndex);
        });

        function showActivity(index) {
            const activity = activities[index];
            const container = document.getElementById('activityContainer');
            
            // ë‹¨ê³„ í‘œì‹œ ì—…ë°ì´íŠ¸
            updateStepIndicator(index);
            
            if (activity.type === 'situation') {
                container.innerHTML = `
                    <div class="situation-card">
                        <div class="character-icon">${activity.character}</div>
                        <h3>${activity.title}</h3>
                        <div class="situation-text">${activity.situation}</div>
                        <h4 style="color: #667eea; margin: 20px 0;">${activity.question}</h4>
                        <div class="choice-buttons">
                            ${activity.choices.map((choice, i) => 
                                `<div class="choice-btn" onclick="selectChoice(${i}, ${choice.correct}, '${activity.explanation}')">${choice.text}</div>`
                            ).join('')}
                        </div>
                    </div>
                `;
            } else if (activity.type === 'reflection') {
                container.innerHTML = `
                    <div class="situation-card">
                        <div class="character-icon">${activity.character}</div>
                        <h3>${activity.title}</h3>
                        <div class="situation-text">${activity.question}</div>
                        <div style="text-align: left; margin: 20px 0;">
                            <h4 style="margin-bottom: 10px;">ğŸ’¡ ì°¸ê³  ì˜ˆì‹œ:</h4>
                            <ul style="list-style: none; padding: 0;">
                                ${activity.examples.map(example => `<li style="margin: 5px 0; padding: 8px; background: #f0f4f8; border-radius: 5px;">â€¢ ${example}</li>`).join('')}
                            </ul>
                        </div>
                        <textarea id="promiseText" 
                            placeholder="${activity.prompt}" 
                            style="width: 100%; height: 100px; padding: 15px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 1em; resize: vertical;"
                            onkeyup="checkPromiseInput()"></textarea>
                    </div>
                `;
            }
            
            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            const progress = ((index + 1) / activities.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentStep').textContent = index + 1;
        }

        function updateStepIndicator(currentIndex) {
            for (let i = 1; i <= 5; i++) {
                const step = document.getElementById(`step${i}`);
                step.className = 'step';
                
                if (i < currentIndex + 1) {
                    step.classList.add('completed');
                } else if (i === currentIndex + 1) {
                    step.classList.add('active');
                }
            }
        }

        function selectChoice(choiceIndex, isCorrect, explanation) {
            const activity = activities[currentActivityIndex];
            const choices = document.querySelectorAll('.choice-btn');
            
            // ëª¨ë“  ë²„íŠ¼ ë¹„í™œì„±í™”
            choices.forEach(btn => btn.style.pointerEvents = 'none');
            
            // ì •ë‹µ í‘œì‹œ
            choices.forEach((btn, i) => {
                if (activity.choices[i].correct) {
                    btn.classList.add('correct');
                } else if (i === choiceIndex && !isCorrect) {
                    btn.classList.add('wrong');
                }
            });
            
            // ë‹µì•ˆ ê¸°ë¡
            session.addAnswer(
                activity.id, 
                activity.choices[choiceIndex].text, 
                isCorrect
            );
            
            // ì„¤ëª… í‘œì‹œ
            setTimeout(() => {
                showAlert(explanation, isCorrect ? 'success' : 'warning');
                
                if (currentActivityIndex < activities.length - 1) {
                    document.getElementById('nextBtn').style.display = 'inline-block';
                } else {
                    document.getElementById('finishBtn').style.display = 'inline-block';
                }
            }, 1000);
        }

        function checkPromiseInput() {
            const textarea = document.getElementById('promiseText');
            if (textarea.value.trim().length > 10) {
                // ë‹¤ì§ì„ ì¶©ë¶„íˆ ì‘ì„±í–ˆìœ¼ë©´ ê¸°ë¡
                userPromises.push(textarea.value.trim());
                session.addAnswer('reflection', textarea.value.trim(), true);
                
                document.getElementById('finishBtn').style.display = 'inline-block';
            }
        }

        function nextActivity() {
            currentActivityIndex++;
            document.getElementById('nextBtn').style.display = 'none';
            showActivity(currentActivityIndex);
        }

        async function finishLesson() {
            const results = await session.finish();
            
            if (results) {
                const correctRate = Math.round((results.correctAnswers / results.totalQuestions) * 100);
                let grade = '';
                let message = '';
                
                if (correctRate >= 80) {
                    grade = 'ğŸ† ìš°ìˆ˜';
                    message = 'ì•½ì†ì˜ ì†Œì¤‘í•¨ì„ ì˜ ì´í•´í–ˆì–´ìš”!';
                } else if (correctRate >= 60) {
                    grade = 'ğŸ‘ ì–‘í˜¸';
                    message = 'ì•½ì†ì— ëŒ€í•´ ì˜ ìƒê°í•´ë³´ì•˜ì–´ìš”!';
                } else {
                    grade = 'ğŸ’ª ë…¸ë ¥';
                    message = 'ì•½ì†ì˜ ì¤‘ìš”ì„±ì„ ë‹¤ì‹œ í•œë²ˆ ìƒê°í•´ë³´ì„¸ìš”!';
                }
                
                let promiseDisplay = '';
                if (userPromises.length > 0) {
                    promiseDisplay = `
                        <div style="background: #f0fff4; padding: 15px; border-radius: 8px; margin: 15px 0; text-align: left;">
                            <h4>ğŸ“ ë‚˜ì˜ ë‹¤ì§:</h4>
                            <p style="font-style: italic; color: #2d3748;">"${userPromises[userPromises.length - 1]}"</p>
                        </div>
                    `;
                }
                
                document.getElementById('resultContent').innerHTML = `
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 2em; margin-bottom: 10px;">${grade}</div>
                        <p>ì •ë‹µë¥ : ${correctRate}% (${results.correctAnswers}/${results.totalQuestions})</p>
                        <p>í•™ìŠµ ì‹œê°„: ${Math.round(results.duration / 60)}ë¶„ ${results.duration % 60}ì´ˆ</p>
                        ${promiseDisplay}
                        <p style="color: #666; margin-top: 20px;">${message}</p>
                        <div style="background: #e6fffa; padding: 15px; border-radius: 8px; margin-top: 20px;">
                            <h4 style="color: #234e52;">ğŸ’¡ ê¸°ì–µí•˜ì„¸ìš”!</h4>
                            <p style="color: #234e52;">ì•½ì†ì€ ë‚˜ì™€ ìƒëŒ€ë°©ì„ ëª¨ë‘ ì†Œì¤‘íˆ ì—¬ê¸°ëŠ” ë§ˆìŒì—ì„œ ì‹œì‘ë©ë‹ˆë‹¤.</p>
                        </div>
                    </div>
                `;
                
                showModal('resultModal');
            }
        }
    </script>
</body>
</html>